<!DOCTYPE html>
<html>
{% load static %}
<head>
    <!-- link to bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- static/login_style.css -->
    <link rel = "stylesheet" type = "text/css" href = "{% static 'main/home_style.css'%}">
    <link rel = "stylesheet" type = "text/css" href = "{% static 'main/footer.css'%}">


    <!-- javascripts from Bootstrap-->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script>
        function getLocation(type) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function (position) {
                        // Get current cordinates.
                        positionCords = [position.coords.latitude, position.coords.longitude];
                        data = {
                            "Type": String(type),
                            "Latitude": positionCords[0],
                            "Longitude": positionCords[1],
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                        }
                        $.ajax({
                            type: "POST",
                            url: "home",
                            data: data
                        });
                        if(type == 'tutee'){
                            alert('Please make sure you have a balance of at least $5')
                            window.location.href = '/tuteeing'
                        }
                        else{
                            window.location.href = '/tutoring'
                        }
                    },
                    function (error) {
                        // On error code..
                        alert("Not able to get location")
                    },
                    { timeout: 30000, enableHighAccuracy: true, maximumAge: 75000 }
                );
            }
            else{
                alert("No location provided, please reset permissions on browser to redo")
                if(type == 'tutee'){
                    window.location.href = '/tuteeing'
                }
                else{
                    window.location.href = '/tutoring'
                }
            }
        }
    </script>

</head>
<body style = "background: LightBlue">
    <div id="wrapper">
     <div class = "container-fluid">
        <div class = "row">
            <div class= "col-sm-9 col-md-7 col-lg-5 mx-auto">
                <div class= "card top_layer my_5">
                    <div class = "body">
                    <h1 class = "title text-center"><b>
                        Home Page</b>
                    </h1>
                    <form method='POST'>
                        {% csrf_token %}
                        <div class = "row p-4">
                            <div class = "col-6">
                                <button value = "tutee" name="tutee" onclick="getLocation(this.value)" type = "submit" class = "btn btn-light btn-circle btn-xl" style = "color:Teal;font-size:20px; border: 2px solid black"><b>Ask a question</b></button>
                            </div>
                            <div class = "col-5">
                                <button value = "tutor" name="tutor" onclick="getLocation(this.value)"type = "submit" class = "btn btn-light btn-circle btn-xl" style = "color:Teal;font-size:20px; border: 2px solid black"><b>Answer a question</b></button>
                            </div>
                        </div>
                        <div  style = "text-align: right">
                            <div style="padding: 2px;">
                                <button class = "btn btn-light" style = "border: 2px solid black; width: 110px;"><a href="userprofile">User</a></button>
                            </div>
                            <div style="padding: 2px;">
                                <button class = "btn btn-light" style = "border: 2px solid black; width: 110px;"><a href="{% url 'account_logout' %}">Log Out</a></button>

                            </div>
                        </div>
                    </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer>Copyright &copy; 2020 All Rights Reserved by quickTutor</footer>

</body>




</html>