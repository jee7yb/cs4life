<!DOCTYPE html>
<html>
{% load socialaccount %}
{% load static %}
{% providers_media_js %}

<head>
    <!-- link to bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- static/login_style.css -->
    <link rel = "stylesheet" type = "text/css" href = "{% static 'main/login_style.css'%}">

    <!-- google api -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- javascripts from Bootstrap-->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</head>

<!-- scripts using google api creating Google User -->

<script>
    function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
            console.log('User signed out.');
        });
    }
</script>

<script>
    function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        var positionCords;
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function (position) {
                    // Get current cordinates.
                    positionCords = [position.coords.latitude, position.coords.longitude];
                    data = {
                        "ID": profile.getId(),
                        "Name": profile.getName(),
                        "Image": profile.getImageUrl(),
                        "Email": profile.getEmail(),
                        "Latitude": positionCords[0],
                        "Longitude": positionCords[1],
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    }
                    $.ajax({
                        type: "POST",
                        url: "loggedIn",
                        data: data
                    });
                },
                function (error) {
                    // On error code..
                    alert("Not able to get location")
                },
                { timeout: 30000, enableHighAccuracy: true, maximumAge: 75000 }
            );
        }
        else {
            alert("Please try again.")
        }
    }

</script>



<body style= "background: rgb(0,128,128); background: linear-gradient(90deg, rgba(0,128,128,1) 0%, rgba(255,250,250,1) 26%, rgba(255,239,213,1) 100%);">

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-9 col-md-8 col-lg-5 mx-auto">
        <div class="card top_layer my-5">
            <div class = "quickTutor_logo_container">
                <img src = "{% static "main/logo.png" %}" > 
            </div>
            <div class="body">
            <h5 class="title text-center"><p style = "font-family: Yu Gothic; font-size:70px;">Welcome to <b>quickTutor!</b></p></h5>
            <form class="form-signin">
              

              <hr class="my-4">

              <div style= "text-align: center;">
                 <button type= "button" class = "btn btn-light btn-circle btn-xl"style= "background-color: Teal; border: 2px solid white;"><a href="{% provider_login_url "google" %}" style ="color: white;font-family: Yu Gothic; font-size:18px;">Sign in</a></button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>